"use strict";exports.id=861,exports.ids=[861],exports.modules={6861:(e,s,a)=>{a.a(e,async(e,t)=>{try{a.r(s),a.d(s,{default:()=>__WEBPACK_DEFAULT_EXPORT__});var l=a(997),n=a(6689),r=a(9101),i=a(4723),o=a(5641),d=a(3803),c=a(2581),m=a(660),u=a(1395),p=a(9305),x=a(2726),h=a(8670),f=a(3725),g=a(9926),j=a(1656),b=e([i,o,u,p,g,j]);[i,o,u,p,g,j]=b.then?(await b)():b;let v=g.z.object({image:g.z.any(),nama:g.z.string().min(1,{message:"Nama is required!"}).max(100),kelas:g.z.nativeEnum(h.rD),jurusan:g.z.nativeEnum(h.Kh),visi:g.z.string().min(1,{message:"Visi is required!"}),misi:g.z.string().min(1,{message:"Misi is required!"})}),N={image:"",nama:"",kelas:h.rD.X,jurusan:h.Kh.TKR,visi:"",misi:""},__WEBPACK_DEFAULT_EXPORT__=e=>{let{register:s,handleSubmit:a,formState:{errors:t},reset:h,setValue:g,setError:b}=(0,o.useForm)({resolver:(0,j.zodResolver)(v)}),[y,w]=(0,n.useState)(0),[k,C]=(0,n.useState)("https://placehold.co/256/png"),[D,I]=(0,n.useState)([]),{admin:P}=(0,f.O)(),[F,z]=(0,n.useState)(!1),[_,Z]=(0,n.useState)(!1),[E,K]=(0,n.useState)(!1),getCalon=async()=>{try{let e=await i.e.get("/admin/calon");I(e.data)}catch(e){(0,d.Z)(e)}},getCalonById=async e=>{try{let s=await i.e.get(`/admin/calon/${e.id}`);w(s.data.id),g("nama",s.data.nama),g("kelas",s.data.kelas),g("jurusan",s.data.jurusan),g("visi",s.data.visi),g("misi",s.data.misi),C(s.data.url)}catch(e){(0,d.Z)(e)}},handleCreateData=async e=>{if(!e.image)return b("image",{message:"Foto is required!",type:"required"},{shouldFocus:!1});(0,m.Z)();let s=new FormData;s.append("file",e.image[0]),s.append("nama",e.nama),s.append("kelas",e.kelas),s.append("jurusan",e.jurusan),s.append("visi",e.visi),s.append("misi",e.misi);try{await i.e.post("/admin/calon",s),h(N),C("https://placehold.co/256/png"),(0,c.Z)("Data Berhasil Dibuat!"),z(!1),getCalon()}catch(e){(0,d.Z)(e)}},handleUpdateData=async e=>{let s=new FormData;(0,m.Z)(),e.image&&s.append("file",e.image[0]),s.append("nama",e.nama),s.append("kelas",e.kelas),s.append("jurusan",e.jurusan),s.append("visi",e.visi),s.append("misi",e.misi);try{await i.e.patch(`/admin/calon/${y}`,s),h(N),C("https://placehold.co/256/png"),(0,c.Z)("Data Berhasil Diupdate!"),Z(!1),z(!1),getCalon()}catch(e){(0,d.Z)(e)}},handleDeleteData=(e,s,a)=>{(0,u.Z)(e,s,a)},handleDeleteAllData=(e,s,a)=>{(0,p.Z)(e,s,a)};return(0,n.useEffect)(()=>{K(!0),h(N),C("https://placehold.co/256/png"),Z(!1),z(!1),getCalon(),K(!1)},[e]),l.jsx("div",{className:"w-full",children:F?l.jsx("div",{className:"flex justify-center items-center font-['Poppins'] bg-white rounded-2xl border shadow-md",children:(0,l.jsxs)("div",{className:"w-full",children:[(0,l.jsxs)("button",{className:"flex items-center m-4 group gap-2",onClick:e=>{e.preventDefault(),z(!1),Z(!1),h(N),C("https://placehold.co/256/png")},children:[l.jsx(r.ArrowLeft,{size:20,color:"#57534e"}),l.jsx("a",{className:"font-['Poppins'] text-sm text-stone-600 font-bold group-hover:underline cursor-pointer",children:"Back"})]}),l.jsx("hr",{className:"border rounded-full"}),(0,l.jsxs)("form",{onSubmit:a(_?handleUpdateData:handleCreateData),className:"w-full",autoComplete:"off",children:[(0,l.jsxs)("div",{className:"text-stone-600 font-bold w-full lg:grid grid-cols-2 gap-4 p-4",children:[l.jsx("div",{className:"flex justify-center items-center col-span-2",children:l.jsx("label",{htmlFor:"file",className:"h-64 w-64 overflow-hidden rounded-2xl",children:l.jsx("img",{src:k,alt:"display",width:256,height:256})})}),(0,l.jsxs)("div",{className:"my-2 lg:my-0",children:[l.jsx("label",{htmlFor:"file",children:"Foto :"}),l.jsx("input",{spellCheck:!1,type:"file",className:`font-['Inter'] text-stone-600 font-bold outline-none bg-transparent my-1 w-full ${t.image?"focus:border-rose-500 border-rose-500":"focus:border-stone-800"} border rounded-lg p-2`,id:"file",accept:"image/*",...s("image"),onChange:e=>{if(e.target&&e.target.files){let s=e.target.files[0]||[];C(URL.createObjectURL(s))}}}),t.image&&l.jsx("p",{className:"font-['Inter'] text-rose-500 font-bold text-sm mx-1",children:t.image.message})]}),(0,l.jsxs)("div",{className:"my-2 lg:my-0",children:[l.jsx("label",{htmlFor:"nama",children:"Nama :"}),l.jsx("input",{spellCheck:!1,type:"text",className:`font-['Inter'] text-stone-600 font-bold outline-none bg-transparent my-1 w-full ${t.nama?"focus:border-rose-500 border-rose-500":"focus:border-stone-800"} border rounded-lg p-2`,id:"nama",...s("nama")}),t.nama&&l.jsx("p",{className:"font-['Inter'] text-rose-500 font-bold text-sm mx-1",children:t.nama.message})]}),(0,l.jsxs)("div",{className:"my-2 lg:my-0",children:[l.jsx("p",{children:"Kelas :"}),(0,l.jsxs)("select",{className:"font-['Inter'] text-stone-600 font-bold outline-none bg-transparent my-1 w-full focus:border-stone-800 border rounded-lg p-2 cursor-pointer",id:"kelas",...s("kelas"),children:[l.jsx("option",{value:"X",children:"X"}),l.jsx("option",{value:"XI",children:"XI"}),l.jsx("option",{value:"XII",children:"XII"})]})]}),(0,l.jsxs)("div",{className:"my-2 lg:my-0",children:[l.jsx("p",{children:"Jurusan :"}),(0,l.jsxs)("select",{className:"font-['Inter'] text-stone-600 font-bold outline-none bg-transparent my-1 w-full focus:border-stone-800 border rounded-lg p-2 cursor-pointer",id:"jurusan",...s("jurusan"),children:[l.jsx("option",{value:"TKR",children:"TKR"}),l.jsx("option",{value:"TMI",children:"TMI"}),l.jsx("option",{value:"RPL",children:"RPL"}),l.jsx("option",{value:"Kuliner",children:"Kuliner"})]})]}),(0,l.jsxs)("div",{className:"my-2 lg:my-0",children:[l.jsx("label",{htmlFor:"visi",children:"Visi :"}),l.jsx("textarea",{spellCheck:!1,rows:8,className:`font-['Inter'] text-stone-600 font-bold outline-none bg-transparent my-1 w-full ${t.visi?"focus:border-rose-500 border-rose-500":"focus:border-stone-800"} border rounded-lg p-2`,id:"visi",...s("visi")}),t.visi&&l.jsx("p",{className:"font-['Inter'] text-rose-500 font-bold text-sm mx-1",children:t.visi.message})]}),(0,l.jsxs)("div",{className:"my-2 lg:my-0",children:[l.jsx("label",{htmlFor:"misi",children:"Misi :"}),l.jsx("textarea",{spellCheck:!1,rows:8,className:`font-['Inter'] text-stone-600 font-bold outline-none bg-transparent my-1 w-full ${t.misi?"focus:border-rose-500 border-rose-500":"focus:border-stone-800"} border rounded-lg p-2`,id:"misi",...s("misi")}),t.misi&&l.jsx("p",{className:"font-['Inter'] text-rose-500 font-bold text-sm mx-1",children:t.misi.message})]})]}),l.jsx("hr",{className:"border rounded-full"}),l.jsx("div",{className:"flex justify-end m-4 gap-4",children:_?(0,l.jsxs)("button",{className:"bg-emerald-500 rounded-xl shadow-md p-2 border flex items-center align-middle gap-2 hover:bg-emerald-600 cursor-pointer group",type:"submit",children:[l.jsx(r.Save,{size:24,color:"#ffffff"}),l.jsx("p",{className:"font-['Poppins'] text-sm text-white block",children:"Simpan"})]}):(0,l.jsxs)("button",{className:"bg-emerald-500 rounded-xl shadow-md p-2 border flex items-center align-middle gap-2 hover:bg-emerald-600 cursor-pointer group",type:"submit",children:[l.jsx(r.Plus,{size:24,color:"#ffffff"}),l.jsx("p",{className:"font-['Poppins'] text-sm text-white block",children:"Buat"})]})})]})]})}):(0,l.jsxs)(l.Fragment,{children:[l.jsx("div",{className:"Pengawas"===P.posisi?"hidden":"relative",children:(0,l.jsxs)("div",{className:"flex justify-start gap-4 pb-2 flex-wrap",children:[(0,l.jsxs)("button",{className:"bg-white rounded-xl shadow-md lg:pr-2 border flex items-center hover:bg-slate-50 cursor-pointer group relative",onClick:()=>{z(!0)},children:[l.jsx(r.PlusCircle,{size:32,color:"#10b981",className:"m-2"}),l.jsx("div",{className:"border-l h-8 border lg:block hidden"}),l.jsx("p",{className:"font-['Poppins'] text-sm text-stone-800 font-bold lg:block hidden m-2",children:"Tambah"})]}),l.jsx(x.Z,{func:()=>{let func=async()=>{getCalon()};handleDeleteAllData(D.length,"/admin/calon",func)}})]})}),null===D?null:E?null:0===D.length?null:l.jsx("div",{className:"mx-auto mt-3 flex justify-center lg:justify-start gap-4 flex-wrap",children:D.map(e=>l.jsx("div",{children:(0,l.jsxs)("div",{className:"bg-white rounded-2xl shadow-md border-2 p-4",children:[l.jsx("div",{className:"w-48 h-48 rounded-2xl overflow-hidden group",children:l.jsx("img",{src:e.url,alt:e.nama,width:192,height:192,className:"mx-auto group-hover:scale-105 transition-transform"})}),l.jsx("hr",{className:"border mx-auto w-10/12 my-2"}),(0,l.jsxs)("div",{className:"flex flex-col justify-center items-center max-w-48",children:[l.jsx("p",{className:"font-['Poppins'] text-md text-stone-800 font-bold block text-center",children:e.nama}),(0,l.jsxs)("p",{className:"font-['Inter'] text-sm text-stone-600 font-bold block text-center",children:[e.kelas," - ",e.jurusan]})]}),l.jsx("hr",{className:"border mx-auto w-10/12 my-2"}),"Pengawas"!==P.posisi&&(0,l.jsxs)("div",{className:"flex justify-around items-center gap-2 w-10/12 mx-auto",children:[l.jsx("button",{className:"bg-sky-500 rounded-lg p-2 border flex justify-center items-center align-middle hover:bg-sky-600 cursor-pointer group flex-grow",onClick:()=>{getCalonById(e),Z(!0),z(!0)},children:l.jsx("p",{className:"font-['Poppins'] text-sm text-white block",children:"Edit"})}),l.jsx("button",{className:"bg-rose-500 rounded-lg p-2 border flex items-center justify-center align-middle hover:bg-rose-600 cursor-pointer group flex-grow",onClick:()=>{handleDeleteData(e.nama,`/admin/calon/${e.id}`,getCalon)},children:l.jsx("p",{className:"font-['Poppins'] text-sm text-white block",children:"Hapus"})})]})]})},e.id))})]})})};t()}catch(e){t(e)}})}};