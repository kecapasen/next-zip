"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[463],{6463:function(e,t,s){s.r(t),s.d(t,{default:function(){return admin_Pemilih}});var a=s(5893),n=s(7294),l=s(2746),r=s.n(l),o=s(7630),i=s.n(o),d=s(2581),c=s(3803),m=s(660),u=s(4697),x=s(7536),h=s(4723),p=s(8670),f=s(2371),b=s(3789),g=s(833),j=s(1896),N=s(2493),w=s(2528),v=s(628),y=s(5697),k=s.n(y);function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e}).apply(this,arguments)}var I=(0,n.forwardRef)(function(e,t){var s=e.color,a=e.size,l=void 0===a?24:a,r=function(e,t){if(null==e)return{};var s,a,n=function(e,t){if(null==e)return{};var s,a,n={},l=Object.keys(e);for(a=0;a<l.length;a++)s=l[a],t.indexOf(s)>=0||(n[s]=e[s]);return n}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)s=l[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}(e,["color","size"]);return n.createElement("svg",_extends({ref:t,xmlns:"http://www.w3.org/2000/svg",width:l,height:l,viewBox:"0 0 24 24",fill:"none",stroke:void 0===s?"currentColor":s,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},r),n.createElement("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),n.createElement("polyline",{points:"17 8 12 3 7 8"}),n.createElement("line",{x1:"12",y1:"3",x2:"12",y2:"15"}))});I.propTypes={color:k().string,size:k().oneOfType([k().string,k().number])},I.displayName="Upload",s(9396);var z=s(9305),P=s(1395),D=s(2726),C=s(3725),Z=s(6312),O=s(1604);O.z.object({page:O.z.number(),limit:O.z.number(),search:O.z.string(),offset:O.z.number(),totalPages:O.z.number(),totalRows:O.z.number(),totalDatas:O.z.number(),siswa:O.z.union([O.z.array(O.z.object({nis:O.z.number(),nama:O.z.string(),kelas:O.z.nativeEnum(p.rD),jurusan:O.z.nativeEnum(p.Kh),candidatesId:O.z.number()})),O.z.null()])});let B=O.z.object({nis:O.z.union([O.z.number(),O.z.string().min(1,{message:"NIS is required!"}).max(10),O.z.nan()]),nama:O.z.string().min(1,{message:"Nama is required!"}).max(100),password:O.z.string().max(100),kelas:O.z.nativeEnum(p.rD),jurusan:O.z.nativeEnum(p.Kh)}).required(),S={page:1,limit:10,search:"",offset:0,totalPages:0,totalRows:0,totalDatas:0,siswa:null},E={nis:"",nama:"",password:"",kelas:p.rD.X,jurusan:p.Kh.TKR};var admin_Pemilih=e=>{let{register:t,handleSubmit:s,formState:{errors:l},reset:o,setValue:p,getValues:y}=(0,x.cI)({resolver:(0,Z.F)(B)}),{admin:k}=(0,C.O)(),[O,_]=(0,n.useState)(""),[R,T]=(0,n.useState)(0),[F]=(0,u.Nr)(O,500),[K,L]=(0,n.useState)(S),{page:X,limit:q,offset:A,totalPages:U,totalRows:M,totalDatas:H,siswa:J}=K,[W,G]=(0,n.useState)(!1),[Q,V]=(0,n.useState)(!1),[Y,$]=(0,n.useState)(!1),[ee,et]=(0,n.useState)(!1),handleClickOutside=e=>{let t=document.getElementById("toggle-button"),s=document.getElementById("toggle-element");!t||(null==s?void 0:s.contains(e.target))||t.contains(e.target)||G(!1)},getPemilih=async()=>{try{let e=await h.e.get("/admin/siswa",{params:{page:X,limit:q,search:F}});L({...K,offset:e.data.offset,totalPages:e.data.totalPages,totalRows:e.data.totalRows,totalDatas:e.data.totalData,siswa:e.data.result})}catch(e){(0,c.Z)(e)}},handleCreateData=async e=>{(0,m.Z)();try{await h.e.post("/admin/siswa",e),(0,d.Z)("Data Berhasil Dibuat!"),V(!1),o(E),getPemilih()}catch(e){(0,c.Z)(e)}},handleImportData=async()=>{let{value:e}=await i()(r()).fire({titleText:"Pilih File Excel",input:"file",showConfirmButton:!0,showCancelButton:!0,showCloseButton:!0,confirmButtonText:"Oke",cancelButtonText:"Cancel",confirmButtonColor:"#22c55e",cancelButtonColor:"#3b82f6",color:"#57534e",icon:"question",inputAttributes:{accept:".xlsx, .xls","aria-label":"Upload your Excel file"},customClass:{title:"font-['Poppins'] text-xl text-stone-800",popup:"font-['Inter'] text-sm font-bold",closeButton:"text-stone-600 hover:text-rose-500",confirmButton:"mx-4",cancelButton:"mx-4"}});if(!e)return(0,c.Z)({message:"Tidak Ada File yang Diupload!"});(0,m.Z)(e);let t=new FormData;t.append("file",e);try{await h.e.post("/admin/import",t),(0,d.Z)("File Berhasil Diupload!"),getPemilih()}catch(e){(0,c.Z)(e)}},handleUpdateData=async e=>{(0,m.Z)();try{await h.e.patch("/admin/siswa/".concat(R),e),(0,d.Z)("Data Berhasil Diubah!"),$(!1),V(!1),o(E),getPemilih()}catch(e){(0,c.Z)(e)}},handleDeleteData=(e,t,s)=>{(0,P.Z)(e,t,s)},handleDeleteAllData=(e,t,s)=>{(0,z.Z)(e,t,s)},es=(0,u.y1)(e=>{L({...K,page:e})},200);return(0,n.useEffect)(()=>(et(!0),o(E),$(!1),V(!1),getPemilih(),et(!1),document.addEventListener("click",handleClickOutside),()=>{document.removeEventListener("click",handleClickOutside)}),[e]),(0,n.useEffect)(()=>{getPemilih()},[F,X,q]),(0,a.jsx)("div",{className:"w-full",children:Q?(0,a.jsx)("div",{className:"flex justify-center items-center font-['Poppins'] bg-white rounded-2xl border shadow-md",children:(0,a.jsxs)("div",{className:"w-full",children:[(0,a.jsxs)("button",{className:"flex items-center m-4 group gap-2",onClick:e=>{e.preventDefault(),V(!1),$(!1),o(E)},children:[(0,a.jsx)(f.Z,{size:20,color:"#57534e"}),(0,a.jsx)("a",{className:"font-['Poppins'] text-sm text-stone-600 font-bold group-hover:underline cursor-pointer",children:"Back"})]}),(0,a.jsxs)("form",{onSubmit:s(Y?handleUpdateData:handleCreateData),className:"w-full",autoComplete:"off",children:[(0,a.jsx)("hr",{className:"border rounded-full"}),(0,a.jsxs)("div",{className:"text-stone-600 font-bold p-4 w-full lg:grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"my-2 lg:my-0",children:[(0,a.jsx)("label",{htmlFor:"nis",children:"NIS :"}),(0,a.jsx)("input",{spellCheck:!1,type:"number",className:"font-['Inter'] text-stone-600 font-bold outline-none bg-transparent my-1 w-full ".concat(l.nis?"focus:border-rose-500 border-rose-500":"focus:border-stone-800"," border rounded-lg p-2"),id:"nis",...t("nis")}),l.nis&&(0,a.jsx)("p",{className:"font-['Inter'] text-rose-500 font-bold text-sm mx-1",children:l.nis.message})]}),(0,a.jsxs)("div",{className:"my-2 lg:my-0",children:[(0,a.jsx)("label",{htmlFor:"nama",children:"Nama :"}),(0,a.jsx)("input",{spellCheck:!1,type:"text",className:"font-['Inter'] text-stone-600 font-bold outline-none bg-transparent my-1 w-full ".concat(l.nama?"focus:border-rose-500 border-rose-500":"focus:border-stone-800"," border rounded-lg p-2"),id:"nama",...t("nama")}),l.nama&&(0,a.jsx)("p",{className:"font-['Inter'] text-rose-500 font-bold text-sm mx-1",children:l.nama.message})]}),(0,a.jsxs)("div",{className:"my-2 lg:my-0",children:[(0,a.jsx)("label",{htmlFor:"password",children:"Password :"}),(0,a.jsx)("input",{spellCheck:!1,type:"text",className:"font-['Inter'] text-stone-600 font-bold outline-none bg-transparent my-1 w-full ".concat(l.password?"border-rose-500":"focus:border-stone-800"," border rounded-lg p-2"),id:"password",...t("password")}),l.password&&(0,a.jsx)("p",{className:"font-['Inter'] text-rose-500 font-bold text-sm mx-1",children:l.password.message})]}),(0,a.jsxs)("div",{className:"my-2 lg:my-0",children:[(0,a.jsx)("p",{children:"Kelas :"}),(0,a.jsxs)("select",{className:"font-['Inter'] text-stone-600 font-bold outline-none bg-transparent my-1 w-full focus:border-stone-800 border rounded-lg p-2 cursor-pointer",id:"kelas",...t("kelas"),children:[(0,a.jsx)("option",{value:"X",children:"X"}),(0,a.jsx)("option",{value:"XI",children:"XI"}),(0,a.jsx)("option",{value:"XII",children:"XII"})]})]}),(0,a.jsxs)("div",{className:"my-2 lg:my-0",children:[(0,a.jsx)("p",{children:"Jurusan :"}),(0,a.jsxs)("select",{className:"font-['Inter'] text-stone-600 font-bold outline-none bg-transparent my-1 w-full focus:border-stone-800 border rounded-lg p-2 cursor-pointer",id:"jurusan",...t("jurusan"),children:[(0,a.jsx)("option",{value:"TKR",children:"TKR"}),(0,a.jsx)("option",{value:"TMI",children:"TMI"}),(0,a.jsx)("option",{value:"RPL",children:"RPL"}),(0,a.jsx)("option",{value:"Kuliner",children:"Kuliner"})]})]})]}),(0,a.jsx)("hr",{className:"border rounded-full"}),(0,a.jsx)("div",{className:"flex justify-start flex-row-reverse m-4 gap-4",children:Y?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("button",{className:"bg-emerald-500 rounded-xl shadow-md p-2 border flex items-center align-middle gap-2 hover:bg-emerald-600 cursor-pointer group",type:"submit",children:[(0,a.jsx)(b.Z,{size:24,color:"#ffffff"}),(0,a.jsx)("p",{className:"font-['Poppins'] text-sm text-white block",children:"Simpan"})]}),(0,a.jsxs)("button",{className:"bg-rose-500 rounded-xl shadow-md p-2 border flex items-center align-middle gap-2 hover:bg-red-600 cursor-pointer group",onClick:e=>{e.preventDefault(),handleDeleteData(y("nama"),"/admin/siswa/".concat(R),()=>{o(E),$(!1),V(!1),getPemilih()})},children:[(0,a.jsx)(g.Z,{size:24,color:"#ffffff"}),(0,a.jsx)("p",{className:"font-['Poppins'] text-sm text-white block",children:"Hapus"})]})]}):(0,a.jsxs)("button",{className:"bg-emerald-500 rounded-xl shadow-md p-2 border flex items-center align-middle gap-2 hover:bg-emerald-600 cursor-pointer group",type:"submit",children:[(0,a.jsx)(j.Z,{size:24,color:"#ffffff"}),(0,a.jsx)("p",{className:"font-['Poppins'] text-sm text-white block",children:"Buat"})]})})]})]})}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"Pengawas"===k.posisi?"hidden":"relative",children:[(0,a.jsxs)("div",{className:"flex justify-start gap-4 pb-2 flex-wrap",children:[(0,a.jsxs)("button",{id:"toggle-button",className:"bg-white rounded-xl shadow-md lg:pr-2 border flex items-center hover:bg-slate-50 cursor-pointer group relative",onClick:()=>{G(!W)},children:[(0,a.jsx)(N.Z,{size:32,color:"#10b981",className:"m-2"}),(0,a.jsx)("div",{className:"border-l h-8 border lg:block hidden"}),(0,a.jsx)("p",{className:"font-['Poppins'] text-sm text-stone-800 font-bold lg:block hidden m-2",children:"Tambah"}),W?(0,a.jsx)(w.Z,{size:16,color:"#57534e",className:"hidden lg:block"}):(0,a.jsx)(v.Z,{size:16,color:"#57534e",className:"hidden lg:block"})]}),(0,a.jsx)(D.Z,{func:()=>{handleDeleteAllData(H,"/admin/siswa",()=>{L({...S,offset:0,totalRows:0,totalPages:0,totalDatas:0,siswa:[]})})}})]}),W?(0,a.jsxs)("div",{className:"animate__animated animate__slideInLeft animate__faster absolute bg-white rounded-xl border shadow-md overflow-hidden transition-transform transform",children:[(0,a.jsxs)("button",{id:"toggle-element",className:"bg-white pr-2 flex items-center align-middle hover:bg-slate-50 cursor-pointer w-full",onClick:()=>{handleImportData()},children:[(0,a.jsx)(I,{size:24,color:"#57534e",className:"m-3"}),(0,a.jsx)("div",{className:"border-l h-8 border"}),(0,a.jsx)("p",{className:"font-['Inter'] text-sm text-stone-600 font-bold block m-2",children:"Import"})]}),(0,a.jsx)("hr",{className:"border"}),(0,a.jsxs)("button",{className:"bg-white pr-2 flex items-center align-middle hover:bg-slate-50 cursor-pointer w-full",onClick:()=>{G(!1),V(!0)},children:[(0,a.jsx)(j.Z,{size:24,color:"#57534e",className:"m-3"}),(0,a.jsx)("div",{className:"border-l h-8 border"}),(0,a.jsx)("p",{className:"font-['Inter'] text-sm text-stone-600 font-bold block m-2",children:"Buat"})]})]}):null]}),(0,a.jsxs)("div",{className:"overflow-y-auto overflow-x-auto bg-white rounded-2xl mt-2 shadow-md",children:[(0,a.jsxs)("div",{className:"flex flex-col lg:flex-row items-center justify-start lg:justify-between p-2",children:[(0,a.jsxs)("form",{className:"flex items-center w-full gap-2",onSubmit:e=>{e.preventDefault()},children:[(0,a.jsx)("label",{htmlFor:"search",children:(0,a.jsx)("p",{className:"font-['Poppins'] text-sm text-stone-800 font-medium",children:"Search"})}),(0,a.jsx)("input",{spellCheck:!1,autoComplete:"off",id:"search",name:"search",className:"flex-1 lg:flex-none font-['Inter'] text-stone-600 font-medium outline-none bg-transparent my-1 focus:border-stone-800 border rounded-lg px-2",type:"text",value:O,required:!0,onChange:e=>{L({...K,page:1}),_(e.target.value)}})]}),(0,a.jsxs)("form",{className:"flex items-center w-full lg:justify-end",children:[(0,a.jsx)("p",{className:"font-['Poppins'] text-sm text-stone-800 font-medium",children:"Rows per page :"}),(0,a.jsxs)("select",{name:"page",className:"p-1 cursor-pointer outline-none font-['Inter'] text-sm text-stone-600 font-medium",required:!0,value:q,onChange:e=>{L({...K,page:1,limit:parseInt(e.target.value)})},children:[(0,a.jsx)("option",{value:10,children:"10"}),(0,a.jsx)("option",{value:20,children:"20"})]})]})]}),(0,a.jsxs)("table",{className:"w-full",children:[(0,a.jsx)("thead",{className:"border",children:(0,a.jsxs)("tr",{className:"bg-sky-500 text-white font-['Poppins'] font-bold text-sm lg:text-base",children:[(0,a.jsx)("th",{className:"m-2 p-1 border",children:"NIS"}),(0,a.jsx)("th",{className:"m-2 p-1 border",children:"Nama"}),(0,a.jsx)("th",{className:"m-2 p-1 border",children:"Kelas"}),(0,a.jsx)("th",{className:"m-2 p-1 border",children:"Jurusan"}),(0,a.jsx)("th",{className:"m-2 p-1 border",children:"Status"})]})}),(0,a.jsx)("tbody",{className:"border",children:null===J||ee?Array(q).fill(0).map((e,t)=>(0,a.jsxs)("tr",{className:"text-center bg-white font-['Inter'] font-medium text-stone-600 text-sm lg:text-base",children:[(0,a.jsx)("td",{className:"m-2 p-1 border",children:(0,a.jsx)("div",{className:"h-[14px] lg:h-[18px] bg-gray-200 rounded fadeInOut w-full"})}),(0,a.jsx)("td",{className:"m-2 p-1 border",children:(0,a.jsx)("div",{className:"h-[14px] lg:h-[18px] bg-gray-200 rounded fadeInOut w-full"})}),(0,a.jsx)("td",{className:"m-2 p-1 border",children:(0,a.jsx)("div",{className:"h-[14px] lg:h-[18px] bg-gray-200 rounded fadeInOut w-full"})}),(0,a.jsx)("td",{className:"m-2 p-1 border",children:(0,a.jsx)("div",{className:"h-[14px] lg:h-[18px] bg-gray-200 rounded fadeInOut w-full"})}),(0,a.jsx)("td",{className:"m-2 p-1 border",children:(0,a.jsx)("div",{className:"h-[14px] lg:h-[18px] bg-gray-200 rounded fadeInOut w-full"})})]},t)):J.length>0?J.map(e=>(0,a.jsxs)("tr",{className:"Pengawas"===k.posisi?"text-center bg-white font-['Inter'] font-medium text-stone-600 text-sm lg:text-base":"text-center bg-white font-['Inter'] font-medium text-stone-600 text-sm lg:text-base hover:bg-slate-50 cursor-pointer",onClick:async()=>{if("Pengawas"!==k.posisi){try{let t=await h.e.get("/admin/siswa/".concat(e.nis));T(t.data.nis),p("nis",t.data.nis),p("nama",t.data.nama),p("password",t.data.password),p("kelas",t.data.kelas),p("jurusan",t.data.jurusan)}catch(e){(0,c.Z)(e)}$(!0),V(!0)}},children:[(0,a.jsx)("td",{className:"border",children:e.nis}),(0,a.jsx)("td",{className:"border",children:e.nama}),(0,a.jsx)("td",{className:"border",children:e.kelas}),(0,a.jsx)("td",{className:"border",children:e.jurusan}),e.candidatesId?(0,a.jsx)("td",{className:"border col-span-full",children:(0,a.jsx)("div",{className:"flex justify-center items-center ",children:(0,a.jsx)("p",{className:"bg-emerald-500 rounded-2xl text-white text-sm px-2",children:"Sudah"})})}):(0,a.jsx)("td",{className:"border col-span-full",children:(0,a.jsx)("div",{className:"flex justify-center items-center ",children:(0,a.jsx)("p",{className:"bg-rose-500 rounded-2xl text-white text-sm px-2",children:"Belum"})})})]},e.nis)):(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:5,className:"text-center bg-white font-['Inter'] font-medium text-stone-600 text-sm lg:text-base",children:"No Data Available"})})})]}),(0,a.jsxs)("div",{className:"flex flex-row items-center justify-between p-2",children:[(0,a.jsxs)("p",{className:"font-['Poppins'] text-sm text-stone-800 font-medium bg-slate-100 rounded-full px-2 py-1",children:[A+1,"-",q*X>M?M:q*X," of"," ",M]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("button",{className:"p-2 hover:bg-slate-50 rounded-full cursor-pointer",onClick:()=>{X>1&&es(X-1)},children:(0,a.jsx)(w.Z,{size:16,color:"#57534e"})}),(0,a.jsx)("p",{className:"font-['Poppins'] text-sm text-stone-800 font-medium",children:X}),(0,a.jsx)("button",{className:"p-2 hover:bg-slate-50 rounded-full cursor-pointer",onClick:()=>{X<U&&es(X+1)},children:(0,a.jsx)(v.Z,{size:16,color:"#57534e"})})]})]})]})]})})}}}]);